<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>South Zone VPA Leadership Development — Action Arc</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        :root {
            --bg-deep: #0f1019;
            --bg-card: #181825;
            --bg-surface: #1e1e2e;
            --accent-gold: #D4A843;
            --accent-gold-light: #F0D68A;
            --text-primary: #e8e6e3;
            --text-secondary: #9ca3af;
            --text-muted: #6b7280;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        html, body {
            min-height: 100vh;
            min-height: 100dvh;
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-primary);
        }

        body {
            background-image:
                radial-gradient(ellipse at 20% 0%, rgba(212, 168, 67, 0.04) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 100%, rgba(14, 165, 233, 0.03) 0%, transparent 50%);
        }

        .font-serif { font-family: 'DM Serif Display', serif; }

        .fade-up {
            animation: fadeUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) forwards;
            opacity: 0; transform: translateY(16px);
        }
        @keyframes fadeUp { to { opacity: 1; transform: translateY(0); } }

        .fade-in { animation: fadeIn 0.5s ease forwards; opacity: 0; }
        @keyframes fadeIn { to { opacity: 1; } }

        .stagger-1 { animation-delay: 0.08s; }
        .stagger-2 { animation-delay: 0.16s; }
        .stagger-3 { animation-delay: 0.24s; }
        .stagger-4 { animation-delay: 0.32s; }

        /* Option buttons */
        .option-btn {
            background: var(--bg-surface);
            border: 1.5px solid rgba(255,255,255,0.06);
            border-radius: 12px;
            padding: 16px 20px 16px 48px;
            text-align: left;
            cursor: pointer;
            transition: all 0.25s cubic-bezier(0.22, 1, 0.36, 1);
            color: var(--text-primary);
            font-size: 0.93rem;
            line-height: 1.5;
            position: relative;
            overflow: hidden;
            width: 100%;
        }
        .option-btn:hover {
            border-color: rgba(255,255,255,0.15);
            transform: translateY(-1px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        }
        .option-btn:active { transform: translateY(0); }

        .option-badge {
            position: absolute;
            left: 14px;
            top: 50%;
            transform: translateY(-50%);
            width: 26px; height: 26px;
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 12px; font-weight: 800;
            border: 2px solid rgba(255,255,255,0.1);
            background: rgba(255,255,255,0.03);
            color: rgba(255,255,255,0.15);
            transition: all 0.25s;
        }

        .option-btn.pick-1 {
            border-color: var(--accent-gold);
            background: rgba(212,168,67,0.08);
        }
        .option-btn.pick-1 .option-badge {
            background: var(--accent-gold);
            border-color: var(--accent-gold);
            color: var(--bg-deep);
        }

        .option-btn.pick-2 {
            border-color: #60a5fa;
            background: rgba(96,165,250,0.06);
        }
        .option-btn.pick-2 .option-badge {
            background: #60a5fa;
            border-color: #60a5fa;
            color: var(--bg-deep);
        }

        .progress-track {
            width: 100%; height: 4px;
            background: rgba(255,255,255,0.06);
            border-radius: 2px; overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-gold), var(--accent-gold-light));
            border-radius: 2px;
            transition: width 0.5s cubic-bezier(0.22, 1, 0.36, 1);
        }

        .btn-primary {
            background: var(--accent-gold);
            color: var(--bg-deep);
            font-weight: 700;
            padding: 14px 32px;
            border-radius: 10px;
            border: none; cursor: pointer;
            font-size: 1rem;
            letter-spacing: 0.02em;
            transition: all 0.2s;
            box-shadow: 0 4px 12px rgba(212,168,67,0.25);
        }
        .btn-primary:hover {
            background: var(--accent-gold-light);
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(212,168,67,0.35);
        }
        .btn-primary:disabled {
            opacity: 0.35; cursor: not-allowed;
            transform: none; box-shadow: none;
        }

        .processing-dot {
            width: 10px; height: 10px; border-radius: 50%;
            background: var(--accent-gold);
            animation: pulse 1.4s ease-in-out infinite;
        }
        .processing-dot:nth-child(2) { animation-delay: 0.2s; }
        .processing-dot:nth-child(3) { animation-delay: 0.4s; }
        @keyframes pulse {
            0%, 80%, 100% { transform: scale(0.6); opacity: 0.3; }
            40% { transform: scale(1); opacity: 1; }
        }

        .toast {
            position: fixed; bottom: 24px; left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: #1e1e2e; border: 1px solid rgba(212,168,67,0.3);
            color: var(--text-primary); padding: 12px 24px; border-radius: 10px;
            font-size: 0.85rem; z-index: 100;
            transition: transform 0.4s cubic-bezier(0.22, 1, 0.36, 1);
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
        }
        .toast.show { transform: translateX(-50%) translateY(0); }

        @media (max-width: 640px) {
            .option-btn { padding: 14px 16px 14px 44px; font-size: 0.88rem; }
        }
    </style>
</head>
<body class="antialiased">
    <div id="app" class="min-h-screen min-h-[100dvh] flex flex-col items-center justify-center px-4 py-8"></div>
    <div id="toast" class="toast"></div>

    <script>
    (function() {
        'use strict';

        const SHEETS_URL = 'https://script.google.com/macros/s/AKfycbw72lENmAPs_wUhTWfC4ztgN5D4qLA-Opxb3hRReBLvP4ndVoTrk5OJMOGzUEuaEQU/exec';

        const NLC_AREAS = {
            spaces: {
                name: "Shaping Learning Spaces",
                short: "Learning Spaces",
                color: "#0EA5E9",
                colorLight: "rgba(14,165,233,0.12)",
                icon: "\u2726",
                description: "You are drawn to reimagining how physical and conceptual environments influence teaching, learning, and school culture. You see spaces not as static backdrops, but as active ingredients in the school experience; you are energised by the possibility of transforming them.",
                actionPrompt: "In the Action Arc, we will explore how intentional spatial design, from classroom layouts to communal areas, can catalyse shifts in pedagogy and school culture."
            },
            partnerships: {
                name: "Leveraging Partnerships",
                short: "Partnerships",
                color: "#F59E0B",
                colorLight: "rgba(245,158,11,0.12)",
                icon: "\u25C8",
                description: "You instinctively look beyond the school gates. You see the potential in connections with community organisations, industry, alumni, and neighbouring schools. You understand that sustainable partnerships can amplify impact in ways that working alone cannot.",
                actionPrompt: "In the Action Arc, we will investigate how structured partnerships can be designed, sustained, and evaluated to create lasting value for your school community."
            },
            tech: {
                name: "Leveraging Technology",
                short: "Technology",
                color: "#8B5CF6",
                colorLight: "rgba(139,92,246,0.12)",
                icon: "\u25C6",
                description: "You are energised by the potential of digital tools, platforms, and systems to transform how schools operate, teach, and learn. You see technology not as an add-on, but as a lever for meaningful improvement; you are ready to explore what is possible.",
                actionPrompt: "In the Action Arc, we will deep-dive into how technology can be harnessed strategically, moving beyond adoption to genuine integration that shifts practice."
            },
            workforce: {
                name: "Engaging a Multi-Generation Workforce",
                short: "Multi-Gen Workforce",
                color: "#F43F5E",
                colorLight: "rgba(244,63,94,0.12)",
                icon: "\u25C7",
                description: "You are attuned to the human dynamics of your school, particularly the richness and tension that comes from a workforce spanning different generations, career stages, and perspectives. You believe that getting this right is the foundation for everything else.",
                actionPrompt: "In the Action Arc, we will explore how intentional strategies for cross-generational engagement can strengthen team cohesion, professional growth, and school culture."
            }
        };

        const CORE_COMPETENCIES = {
            thinking:     { name: "Thinking Clearly & Making Sound Judgements", short: "Clear Thinking" },
            heart:        { name: "Serving with Heart, Commitment & Purpose", short: "Purposeful Service" },
            onePS:        { name: "Working as One Public Service", short: "One Public Service" },
            stakeholders: { name: "Working Effectively with Citizens & Stakeholders", short: "Stakeholder Engagement" },
            learning:     { name: "Keep Learning & Putting Skills into Action", short: "Continuous Learning" },
            innovating:   { name: "Improving & Innovating Continuously", short: "Innovation" },
            stewarding:   { name: "Stewarding Systems for Today & Tomorrow", short: "Systems Stewardship" },
            caring:       { name: "Caring for, Developing & Inspiring Staff", short: "People Development" }
        };

        const QUESTIONS = [
            {
                scenario: "Your school has just received approval for a significant improvement project. As the Admin lead, you are energised by the range of possibilities ahead.",
                question: "What aspect of leading this project draws you in most?",
                options: [
                    { text: "Reimagining how the physical environment can better support varied modes of learning across classrooms, corridors, and communal areas.", nlc: { spaces: 3, partnerships: 0, tech: 1, workforce: 0 }, cc: { thinking: 1, heart: 0, onePS: 0, stakeholders: 0, learning: 0, innovating: 2, stewarding: 2, caring: 0 } },
                    { text: "Reaching out to community organisations, alumni networks, or industry partners who could bring fresh perspectives and resources to the project.", nlc: { spaces: 0, partnerships: 3, tech: 0, workforce: 1 }, cc: { thinking: 0, heart: 1, onePS: 1, stakeholders: 3, learning: 0, innovating: 0, stewarding: 0, caring: 0 } },
                    { text: "Investigating how digital tools, platforms, or smart systems could transform the way the project is planned, delivered, and experienced.", nlc: { spaces: 1, partnerships: 0, tech: 3, workforce: 0 }, cc: { thinking: 1, heart: 0, onePS: 0, stakeholders: 0, learning: 2, innovating: 2, stewarding: 0, caring: 0 } },
                    { text: "Thinking about how to rally staff across different generations and experience levels to co-own and co-create the project together.", nlc: { spaces: 0, partnerships: 1, tech: 0, workforce: 3 }, cc: { thinking: 0, heart: 1, onePS: 1, stakeholders: 0, learning: 0, innovating: 0, stewarding: 0, caring: 3 } }
                ]
            },
            {
                scenario: "You have the opportunity to reallocate a modest budget surplus before the financial year closes. Several proposals land on your desk, each with merit.",
                question: "Which proposal do you find yourself instinctively advocating for?",
                options: [
                    { text: "Refreshing a tired learning space with new furniture arrangements, flexible zones, or improved aesthetics that signal a shift in how the school thinks about environment.", nlc: { spaces: 3, partnerships: 0, tech: 1, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 0, stakeholders: 0, learning: 0, innovating: 3, stewarding: 1, caring: 0 } },
                    { text: "Seed-funding a partnership programme with a local organisation or neighbouring school that could grow into a sustained collaboration.", nlc: { spaces: 0, partnerships: 3, tech: 0, workforce: 1 }, cc: { thinking: 0, heart: 0, onePS: 2, stakeholders: 2, learning: 0, innovating: 0, stewarding: 1, caring: 0 } },
                    { text: "Piloting a new edtech tool or upgrading infrastructure for blended learning; something the school has been meaning to explore.", nlc: { spaces: 0, partnerships: 0, tech: 3, workforce: 0 }, cc: { thinking: 1, heart: 0, onePS: 0, stakeholders: 0, learning: 2, innovating: 2, stewarding: 0, caring: 0 } },
                    { text: "Investing in a cross-generational mentoring or structured professional growth initiative for staff across career stages.", nlc: { spaces: 0, partnerships: 0, tech: 0, workforce: 3 }, cc: { thinking: 0, heart: 1, onePS: 0, stakeholders: 0, learning: 1, innovating: 0, stewarding: 0, caring: 3 } }
                ]
            },
            {
                scenario: "You notice a growing divide in how experienced and newer staff are responding to a recent change in school processes. Conversations in the staffroom hint at frustration on both sides.",
                question: "As the Admin overseeing this, your instinct is to\u2026",
                options: [
                    { text: "Create a shared space, physical or conceptual, where both groups can co-design solutions. Sometimes changing the environment changes the conversation.", nlc: { spaces: 2, partnerships: 0, tech: 0, workforce: 2 }, cc: { thinking: 0, heart: 0, onePS: 0, stakeholders: 0, learning: 0, innovating: 1, stewarding: 1, caring: 1 } },
                    { text: "Bring in an external facilitator or partner, someone outside the school dynamics, to mediate and offer fresh perspectives on the situation.", nlc: { spaces: 0, partnerships: 3, tech: 0, workforce: 1 }, cc: { thinking: 0, heart: 0, onePS: 1, stakeholders: 2, learning: 0, innovating: 0, stewarding: 0, caring: 1 } },
                    { text: "Set up a digital feedback channel or collaborative platform to surface and address concerns transparently, giving everyone an equal voice.", nlc: { spaces: 0, partnerships: 0, tech: 3, workforce: 1 }, cc: { thinking: 1, heart: 0, onePS: 0, stakeholders: 0, learning: 1, innovating: 1, stewarding: 0, caring: 1 } },
                    { text: "Pair experienced staff with newer colleagues in structured dialogue sessions. The gap needs bridging through deliberate, human connection.", nlc: { spaces: 0, partnerships: 0, tech: 0, workforce: 3 }, cc: { thinking: 0, heart: 2, onePS: 0, stakeholders: 0, learning: 0, innovating: 0, stewarding: 0, caring: 3 } }
                ]
            },
            {
                scenario: "A new MOE initiative requires your school to rethink how a key programme is delivered. The timeline is tight, and your Principal is looking to you to chart the initial direction.",
                question: "Your first move is to\u2026",
                options: [
                    { text: "Walk through the existing spaces and ask: how could we reconfigure the environment to support this new approach? The space itself might be part of the answer.", nlc: { spaces: 3, partnerships: 0, tech: 0, workforce: 0 }, cc: { thinking: 1, heart: 0, onePS: 0, stakeholders: 0, learning: 0, innovating: 1, stewarding: 2, caring: 0 } },
                    { text: "Map the external stakeholders and partners who could support the transition. Who has done this well, and who might we learn from or collaborate with?", nlc: { spaces: 0, partnerships: 3, tech: 0, workforce: 0 }, cc: { thinking: 1, heart: 0, onePS: 1, stakeholders: 3, learning: 0, innovating: 0, stewarding: 0, caring: 0 } },
                    { text: "Research what technological solutions other schools or systems have used for similar initiatives. There might be a platform or tool that accelerates everything.", nlc: { spaces: 0, partnerships: 0, tech: 3, workforce: 0 }, cc: { thinking: 1, heart: 0, onePS: 0, stakeholders: 0, learning: 3, innovating: 0, stewarding: 0, caring: 0 } },
                    { text: "Convene a diverse task force that deliberately includes voices from different career stages and roles. The initiative will only land well if everyone feels ownership.", nlc: { spaces: 0, partnerships: 1, tech: 0, workforce: 3 }, cc: { thinking: 0, heart: 1, onePS: 1, stakeholders: 0, learning: 0, innovating: 0, stewarding: 0, caring: 2 } }
                ]
            },
            {
                scenario: "You discover that a significant space in your school, perhaps a corner of the library, an old AV room, or a section of the canteen, is consistently underutilised.",
                question: "What possibility comes to mind first?",
                options: [
                    { text: "Transforming it into a flexible learning hub: a maker space, collaborative zone, or wellness corner that responds to what students and staff actually need.", nlc: { spaces: 3, partnerships: 0, tech: 0, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 0, stakeholders: 0, learning: 0, innovating: 3, stewarding: 1, caring: 0 } },
                    { text: "Opening it up to community partners. A shared space that connects the school to its wider ecosystem and invites outside expertise in.", nlc: { spaces: 1, partnerships: 3, tech: 0, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 2, stakeholders: 2, learning: 0, innovating: 0, stewarding: 0, caring: 0 } },
                    { text: "Equipping it with technology to serve as a digital learning lab or innovation studio; somewhere the school can experiment with new tools.", nlc: { spaces: 2, partnerships: 0, tech: 3, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 0, stakeholders: 0, learning: 1, innovating: 2, stewarding: 0, caring: 0 } },
                    { text: "Designating it as a staff development hub where colleagues across generations can learn, share, and recharge together.", nlc: { spaces: 1, partnerships: 0, tech: 0, workforce: 3 }, cc: { thinking: 0, heart: 1, onePS: 0, stakeholders: 0, learning: 1, innovating: 0, stewarding: 0, caring: 3 } }
                ]
            },
            {
                scenario: "You are planning an upcoming professional development session for the Admin team. You have some latitude to shape the format and focus.",
                question: "Which approach appeals to you most?",
                options: [
                    { text: "A site visit to a school or organisation known for innovative use of learning environments. Seeing it in person changes how people think about what is possible.", nlc: { spaces: 3, partnerships: 1, tech: 0, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 0, stakeholders: 0, learning: 2, innovating: 1, stewarding: 1, caring: 0 } },
                    { text: "Inviting an external partner, from industry, a community organisation, or another sector entirely, to share how they approach similar challenges.", nlc: { spaces: 0, partnerships: 3, tech: 0, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 0, stakeholders: 2, learning: 1, innovating: 0, stewarding: 0, caring: 0 } },
                    { text: "A hands-on workshop exploring emerging tools and platforms relevant to school administration and learning; something people can try immediately.", nlc: { spaces: 0, partnerships: 0, tech: 3, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 0, stakeholders: 0, learning: 3, innovating: 1, stewarding: 0, caring: 0 } },
                    { text: "A facilitated session that deliberately pairs senior and junior staff to exchange insights, challenge assumptions, and co-develop ideas.", nlc: { spaces: 0, partnerships: 0, tech: 0, workforce: 3 }, cc: { thinking: 0, heart: 1, onePS: 0, stakeholders: 0, learning: 1, innovating: 0, stewarding: 0, caring: 2 } }
                ]
            },
            {
                scenario: "A parent volunteer group approaches you with energy and ideas. They are keen to contribute meaningfully to the school, and you sense genuine goodwill.",
                question: "Your first thought is\u2026",
                options: [
                    { text: "How might their input inform the way we design or improve our school\u2019s physical environment? Parents see spaces differently; that perspective is valuable.", nlc: { spaces: 3, partnerships: 1, tech: 0, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 0, stakeholders: 1, learning: 0, innovating: 1, stewarding: 1, caring: 0 } },
                    { text: "This is a partnership opportunity. How do we structure this for sustained, mutual benefit rather than a one-off engagement?", nlc: { spaces: 0, partnerships: 3, tech: 0, workforce: 0 }, cc: { thinking: 1, heart: 0, onePS: 1, stakeholders: 3, learning: 0, innovating: 0, stewarding: 0, caring: 0 } },
                    { text: "Could we channel their energy into a digital initiative, such as an app, a platform, or a tech-supported programme that scales their contribution?", nlc: { spaces: 0, partnerships: 1, tech: 3, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 0, stakeholders: 1, learning: 0, innovating: 2, stewarding: 0, caring: 0 } },
                    { text: "How do we ensure this engages staff across experience levels so it does not become siloed to one group and instead enriches the whole team?", nlc: { spaces: 0, partnerships: 1, tech: 0, workforce: 3 }, cc: { thinking: 0, heart: 0, onePS: 1, stakeholders: 1, learning: 0, innovating: 0, stewarding: 0, caring: 2 } }
                ]
            },
            {
                scenario: "When leading a significant change in your school, perhaps a restructured timetable, a new assessment model, or a shift in how CCAs are managed, you find yourself gravitating toward a particular leadership approach.",
                question: "Which resonates most?",
                options: [
                    { text: "Making the change visible and tangible by reconfiguring environments so people can see and feel the difference. Physical shifts signal mindset shifts.", nlc: { spaces: 3, partnerships: 0, tech: 0, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 0, stakeholders: 0, learning: 0, innovating: 1, stewarding: 2, caring: 0 } },
                    { text: "Anchoring the change through relationships by building coalitions with partners inside and outside the school who believe in the direction.", nlc: { spaces: 0, partnerships: 3, tech: 0, workforce: 1 }, cc: { thinking: 0, heart: 1, onePS: 2, stakeholders: 2, learning: 0, innovating: 0, stewarding: 0, caring: 0 } },
                    { text: "Using data, dashboards, and digital tools to track progress and maintain transparency throughout the process. Evidence builds trust.", nlc: { spaces: 0, partnerships: 0, tech: 3, workforce: 0 }, cc: { thinking: 3, heart: 0, onePS: 0, stakeholders: 0, learning: 1, innovating: 0, stewarding: 1, caring: 0 } },
                    { text: "Focusing on people by ensuring every generation and experience level feels heard, valued, and equipped for the shift. Change is only real when people own it.", nlc: { spaces: 0, partnerships: 0, tech: 0, workforce: 3 }, cc: { thinking: 0, heart: 2, onePS: 0, stakeholders: 0, learning: 0, innovating: 0, stewarding: 0, caring: 3 } }
                ]
            },
            {
                scenario: "It is a quiet Saturday morning. You find yourself reading an article that really grabs your attention; the kind you would bookmark and perhaps share with a colleague on Monday.",
                question: "What is it about?",
                options: [
                    { text: "How a school in Scandinavia redesigned its campus to dissolve the boundaries between indoor and outdoor learning, and the pedagogical shifts that followed.", nlc: { spaces: 3, partnerships: 0, tech: 0, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 0, stakeholders: 0, learning: 1, innovating: 2, stewarding: 1, caring: 0 } },
                    { text: "A public-private partnership model in education that produced unexpected benefits for both the school and the community, along with the design principles behind it.", nlc: { spaces: 0, partnerships: 3, tech: 0, workforce: 0 }, cc: { thinking: 1, heart: 0, onePS: 2, stakeholders: 2, learning: 0, innovating: 0, stewarding: 0, caring: 0 } },
                    { text: "An AI-powered system that is helping school leaders make better resource allocation decisions, with clear evidence of improved outcomes.", nlc: { spaces: 0, partnerships: 0, tech: 3, workforce: 0 }, cc: { thinking: 2, heart: 0, onePS: 0, stakeholders: 0, learning: 2, innovating: 1, stewarding: 0, caring: 0 } },
                    { text: "A multi-generational workplace study showing how intentional cross-age teaming boosts both innovation and retention, with lessons directly applicable to schools.", nlc: { spaces: 0, partnerships: 0, tech: 0, workforce: 3 }, cc: { thinking: 1, heart: 1, onePS: 0, stakeholders: 0, learning: 1, innovating: 0, stewarding: 0, caring: 2 } }
                ]
            },
            {
                scenario: "When you picture the lasting impact of your leadership in this role, you allow yourself a moment of honest reflection about what matters most to you.",
                question: "You hope colleagues will one day say you were the leader who\u2026",
                options: [
                    { text: "Transformed the way spaces in our school look, feel, and function, making the environment itself a teacher and a statement of values.", nlc: { spaces: 3, partnerships: 0, tech: 0, workforce: 0 }, cc: { thinking: 0, heart: 1, onePS: 0, stakeholders: 0, learning: 0, innovating: 2, stewarding: 2, caring: 0 } },
                    { text: "Built bridges we never imagined, connecting us with partners who made our school community richer, more resourceful, and more outward-looking.", nlc: { spaces: 0, partnerships: 3, tech: 0, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 1, stakeholders: 3, learning: 0, innovating: 0, stewarding: 0, caring: 0 } },
                    { text: "Brought us into the future, making technology work for us in ways that felt natural, empowering, and genuinely useful.", nlc: { spaces: 0, partnerships: 0, tech: 3, workforce: 0 }, cc: { thinking: 0, heart: 0, onePS: 0, stakeholders: 0, learning: 2, innovating: 2, stewarding: 1, caring: 0 } },
                    { text: "Brought us together, making sure every voice, from the most experienced to the newest, was heard, valued, and woven into the fabric of our school.", nlc: { spaces: 0, partnerships: 0, tech: 0, workforce: 3 }, cc: { thinking: 0, heart: 2, onePS: 0, stakeholders: 0, learning: 0, innovating: 0, stewarding: 0, caring: 3 } }
                ]
            }
        ];

        // ============================================================
        //  STATE
        // ============================================================
        const app = document.getElementById('app');
        let participantName = '';
        let currentQ = 0;
        let answers = []; // each: { first: idx, second: idx }
        let pick1 = null;
        let pick2 = null;

        function showToast(msg, dur = 3000) {
            const t = document.getElementById('toast');
            t.textContent = msg;
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), dur);
        }

        function shuffle(arr) {
            const a = [...arr];
            for (let i = a.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [a[i], a[j]] = [a[j], a[i]];
            }
            return a;
        }

        const shuffledOrders = QUESTIONS.map(q => shuffle(q.options.map((_, i) => i)));

        // ============================================================
        //  WELCOME
        // ============================================================
        function renderWelcome() {
            app.innerHTML = `
                <div class="w-full max-w-lg text-center fade-up">
                    <div class="mb-10">
                        <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full border border-white/10 bg-white/[0.03] mb-6">
                            <span class="text-xs font-semibold tracking-widest uppercase" style="color:var(--accent-gold);">South Zone</span>
                        </div>
                        <h1 class="font-serif text-3xl sm:text-4xl leading-tight mb-3" style="color:var(--accent-gold-light);">VPA Leadership<br>Development Series</h1>
                        <p class="text-sm tracking-widest uppercase font-semibold" style="color:var(--text-muted);">Action Arc &middot; 2026 &ndash; 27</p>
                    </div>
                    <div class="text-left bg-white/[0.02] border border-white/[0.06] rounded-2xl p-6 mb-8">
                        <p class="text-sm leading-relaxed" style="color:var(--text-secondary);">Welcome to the <strong style="color:var(--text-primary);">Action Arc</strong>, the second phase of our 6-year leadership development journey. Before our first workshop, we would like to help you discover your <em>area of focus</em> for the work ahead.</p>
                        <p class="text-sm leading-relaxed mt-3" style="color:var(--text-secondary);">This short exercise presents 10 leadership scenarios. For each, <strong style="color:var(--accent-gold);">select two options</strong>: your first choice carries more weight than your second. There are no right or wrong answers; simply choose what resonates most naturally with you.</p>
                    </div>
                    <div class="mb-6">
                        <label for="nameInput" class="block text-xs font-semibold tracking-wider uppercase mb-2" style="color:var(--text-muted);">Your name</label>
                        <input type="text" id="nameInput" maxlength="40" placeholder="e.g. Alvin" class="w-full px-5 py-4 rounded-xl text-center text-lg font-semibold outline-none transition-all" style="background:var(--bg-surface);border:1.5px solid rgba(255,255,255,0.08);color:var(--text-primary);" onfocus="this.style.borderColor='var(--accent-gold)'" onblur="this.style.borderColor='rgba(255,255,255,0.08)'">
                    </div>
                    <button id="startBtn" class="btn-primary w-full text-base" disabled>Begin</button>
                    <p class="text-xs mt-6" style="color:var(--text-muted);">Takes about 5 minutes &middot; 10 scenarios</p>
                </div>`;
            const inp = document.getElementById('nameInput');
            const btn = document.getElementById('startBtn');
            inp.addEventListener('input', () => { btn.disabled = inp.value.trim().length < 1; });
            inp.addEventListener('keydown', e => { if (e.key === 'Enter' && inp.value.trim().length >= 1) startSurvey(); });
            btn.addEventListener('click', startSurvey);
        }

        function startSurvey() {
            participantName = document.getElementById('nameInput').value.trim();
            currentQ = 0; answers = [];
            renderQuestion();
        }

        // ============================================================
        //  QUESTION — TWO-CHOICE
        // ============================================================
        function renderQuestion() {
            pick1 = null; pick2 = null;
            const q = QUESTIONS[currentQ];
            const order = shuffledOrders[currentQ];
            const pct = ((currentQ) / QUESTIONS.length) * 100;

            app.innerHTML = `
                <div class="w-full max-w-lg fade-up">
                    <div class="mb-6">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-xs font-semibold tracking-widest uppercase" style="color:var(--text-muted);">Question ${currentQ+1} of ${QUESTIONS.length}</span>
                            <span class="text-xs font-medium" style="color:var(--accent-gold);">${Math.round(pct)}%</span>
                        </div>
                        <div class="progress-track"><div class="progress-fill" style="width:${pct}%"></div></div>
                    </div>
                    <div class="mb-4 p-4 rounded-xl" style="background:rgba(212,168,67,0.04);border:1px solid rgba(212,168,67,0.08);">
                        <p class="text-sm leading-relaxed font-serif italic" style="color:var(--text-secondary);">${q.scenario}</p>
                    </div>
                    <h2 class="text-lg sm:text-xl font-bold mb-2 leading-snug" style="color:var(--text-primary);">${q.question}</h2>
                    <p class="text-xs mb-5" style="color:var(--text-muted);">Select two. <span style="color:var(--accent-gold);font-weight:600;">First choice</span> carries more weight than your <span style="color:#60a5fa;font-weight:600;">second</span>. Tap again to deselect.</p>
                    <div class="space-y-3" id="opts">
                        ${order.map((oi, di) => `<button class="option-btn fade-up stagger-${di+1}" data-orig="${oi}"><span class="option-badge"></span>${q.options[oi].text}</button>`).join('')}
                    </div>
                    <div class="mt-6"><button id="nextQBtn" class="btn-primary w-full" disabled>Next</button></div>
                </div>`;
            document.querySelectorAll('.option-btn').forEach(b => b.addEventListener('click', () => handleClick(parseInt(b.dataset.orig))));
            document.getElementById('nextQBtn').addEventListener('click', advance);
        }

        function handleClick(idx) {
            if (pick1 === idx) { pick1 = pick2 !== null ? pick2 : null; pick2 = null; }
            else if (pick2 === idx) { pick2 = null; }
            else if (pick1 === null) { pick1 = idx; }
            else if (pick2 === null) { pick2 = idx; }
            else { showToast('Deselect an option first.'); return; }
            updateStyles();
        }

        function updateStyles() {
            document.querySelectorAll('.option-btn').forEach(b => {
                const o = parseInt(b.dataset.orig);
                const badge = b.querySelector('.option-badge');
                b.classList.remove('pick-1','pick-2');
                badge.textContent = '';
                if (o === pick1) { b.classList.add('pick-1'); badge.textContent = '1'; }
                else if (o === pick2) { b.classList.add('pick-2'); badge.textContent = '2'; }
            });
            document.getElementById('nextQBtn').disabled = (pick1 === null || pick2 === null);
        }

        function advance() {
            answers.push({ first: pick1, second: pick2 });
            currentQ++;
            currentQ >= QUESTIONS.length ? renderProcessing() : renderQuestion();
        }

        // ============================================================
        //  PROCESSING
        // ============================================================
        function renderProcessing() {
            app.innerHTML = `<div class="text-center fade-up"><div class="flex justify-center gap-3 mb-8"><div class="processing-dot"></div><div class="processing-dot"></div><div class="processing-dot"></div></div><p class="font-serif text-xl mb-2" style="color:var(--accent-gold-light);">Mapping your leadership profile\u2026</p><p class="text-sm" style="color:var(--text-muted);">Analysing your responses across focus areas and competencies</p></div>`;
            setTimeout(() => { const r = calculateResults(); sendToSheets(r); renderResults(r); }, 2200);
        }

        // ============================================================
        //  SCORING: 1st choice x1.0, 2nd choice x0.5
        // ============================================================
        function calculateResults() {
            const nlc = { spaces:0, partnerships:0, tech:0, workforce:0 };
            const cc = { thinking:0, heart:0, onePS:0, stakeholders:0, learning:0, innovating:0, stewarding:0, caring:0 };
            answers.forEach((a, qi) => {
                const f = QUESTIONS[qi].options[a.first];
                const s = QUESTIONS[qi].options[a.second];
                for (const k in f.nlc) nlc[k] += f.nlc[k];
                for (const k in f.cc) cc[k] += f.cc[k];
                for (const k in s.nlc) nlc[k] += s.nlc[k] * 0.5;
                for (const k in s.cc) cc[k] += s.cc[k] * 0.5;
            });
            const sNLC = Object.entries(nlc).sort((a,b) => b[1]-a[1]);
            const pri = sNLC[0], sec = sNLC[1];
            const hasSec = sec[1] >= pri[1] * 0.7 && sec[1] > 0;
            const sCC = Object.entries(cc).sort((a,b) => b[1]-a[1]);
            const topCC = sCC.slice(0,2).filter(c => c[1] > 0);
            return { nlc, cc, primary:{key:pri[0],score:pri[1]}, secondary:hasSec?{key:sec[0],score:sec[1]}:null, competencies:topCC.map(c=>c[0]), allNLC:sNLC };
        }

        // ============================================================
        //  GOOGLE SHEETS
        // ============================================================
        function sendToSheets(r) {
            const p = NLC_AREAS[r.primary.key];
            const s = r.secondary ? NLC_AREAS[r.secondary.key] : null;
            const c1 = r.competencies[0] ? CORE_COMPETENCIES[r.competencies[0]].name : '';
            const c2 = r.competencies[1] ? CORE_COMPETENCIES[r.competencies[1]].name : '';
            const scores = r.allNLC.map(([k,v]) => NLC_AREAS[k].short+': '+v.toFixed(1)).join(', ');
            fetch(SHEETS_URL, { method:'POST', mode:'no-cors', headers:{'Content-Type':'application/json'}, body:JSON.stringify({ name:participantName, primaryArea:p.name, secondaryArea:s?s.name:'\u2014', competency1:c1, competency2:c2, scoreBreakdown:scores })}).catch(e=>console.warn('[Sheets]',e));
        }

        // ============================================================
        //  RESULT CARD — all inline styles for html2canvas
        // ============================================================
        function renderResults(r) {
            const pri = NLC_AREAS[r.primary.key];
            const sec = r.secondary ? NLC_AREAS[r.secondary.key] : null;
            const comps = r.competencies.map(k => CORE_COMPETENCIES[k]);
            const C = { gold:'#D4A843', goldL:'#F0D68A', tP:'#e8e6e3', tS:'#9ca3af', tM:'#6b7280', bgD:'#0f1019', div:'rgba(255,255,255,0.06)' };

            const compHTML = comps.map(c => `<span style="display:inline-flex;align-items:center;justify-content:center;padding:6px 14px;border-radius:6px;font-size:11px;font-weight:600;letter-spacing:0.03em;border:1px solid rgba(255,255,255,0.12);background:rgba(255,255,255,0.05);color:${C.tS};line-height:1.3;">${c.short}</span>`).join(' ');

            const secHTML = sec ? `<div style="display:flex;align-items:flex-start;gap:8px;margin-top:12px;"><span style="font-size:12px;font-weight:700;margin-top:2px;color:${sec.color};">${sec.icon}</span><div><p style="font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;color:${C.tM};">You also showed a strong inclination toward</p><p style="font-size:14px;font-weight:700;margin-top:2px;color:${sec.color};">${sec.name}</p></div></div>` : '';

            const mx = r.allNLC[0][1];
            const bars = r.allNLC.map(([k,v]) => { const a = NLC_AREAS[k]; const p = mx>0?(v/mx)*100:0; return `<div style="display:flex;align-items:center;gap:8px;margin-bottom:8px;"><span style="font-size:10px;font-weight:700;width:95px;text-align:right;color:${a.color};white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">${a.short}</span><div style="flex:1;height:8px;border-radius:9999px;background:rgba(255,255,255,0.06);"><div style="height:100%;border-radius:9999px;width:${p}%;background:${a.color};${v>0?'min-width:4px;':''}"></div></div></div>`; }).join('');

            const d = `<div style="height:1px;background:${C.div};margin:0 20px;"></div>`;
            const s = (c,x='') => `<div style="padding:16px 20px;${x}">${c}</div>`;

            const card = `
<div style="height:4px;background:linear-gradient(90deg,${pri.color},transparent);"></div>
${s(`<div style="display:flex;align-items:flex-start;justify-content:space-between;"><div><p style="font-size:10px;font-weight:700;letter-spacing:0.15em;text-transform:uppercase;color:${C.gold};">South Zone VPA Leadership Development</p><p style="font-size:9px;font-weight:500;letter-spacing:0.08em;text-transform:uppercase;margin-top:2px;color:${C.tM};">Action Arc \u00B7 2026 \u2013 27</p></div><div><span style="font-size:9px;font-weight:600;padding:4px 8px;border-radius:4px;background:${pri.colorLight};color:${pri.color};">NLC Focus</span></div></div>`,'padding-bottom:8px;')}
${d}
${s(`<p style="font-size:16px;font-weight:700;margin-bottom:4px;color:${C.tP};">Hi, ${participantName}!</p><p style="font-size:11px;line-height:1.6;margin-bottom:16px;color:${C.tS};">Based on your responses across 10 leadership scenarios, here is what we found.</p><div style="border-radius:12px;padding:16px;margin-bottom:12px;background:${pri.colorLight};border:1px solid ${pri.color}33;"><p style="font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:4px;color:${C.tM};">Your Primary Focus Area</p><div style="display:flex;align-items:center;gap:8px;margin-bottom:8px;"><span style="font-size:18px;">${pri.icon}</span><span style="font-size:20px;font-weight:700;color:${pri.color};">${pri.name}</span></div><p style="font-size:11px;line-height:1.6;color:${C.tS};">${pri.description}</p></div>${secHTML}`)}
${d}
${s(`<p style="font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:12px;color:${C.tM};">Your Profile</p>${bars}`)}
${d}
${s(`<p style="font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:4px;color:${C.tM};">Competencies to Consider</p><p style="font-size:10px;line-height:1.6;margin-bottom:10px;color:${C.tS};">As you work on your focus area, you might consider developing these competencies alongside your learning.</p><div style="display:flex;flex-wrap:wrap;gap:8px;justify-content:center;align-items:center;">${compHTML}</div>`)}
${d}
${s(`<p style="font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:4px;color:${C.gold};">Looking Ahead</p><p style="font-size:11px;line-height:1.6;font-style:italic;color:${C.tS};font-family:'DM Serif Display',serif;">${pri.actionPrompt}</p>`)}
${d}
${s(`<p style="font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:8px;color:${C.tM};">Our Journey So Far</p><p style="font-size:10px;line-height:1.6;margin-bottom:12px;color:${C.tS};">In the <strong style="color:${C.tP};">Awareness Arc (2024\u201325)</strong>, we explored values and values hierarchies, emotional intelligence and the narratives we frame, design thinking and engaging the voice of our communities, and systems thinking and complexity through gameplay. We connected between these ideas to inform how we show up and lead.</p><div style="display:flex;gap:12px;font-size:9px;"><div style="flex:1;border-radius:8px;padding:10px;text-align:center;background:${C.bgD};border:1px solid ${C.div};"><p style="font-weight:700;color:${C.gold};">2024 \u2013 25</p><p style="color:${C.tM};">Awareness</p></div><div style="flex:1;border-radius:8px;padding:10px;text-align:center;background:${pri.colorLight};border:1px solid ${pri.color}44;"><p style="font-weight:700;color:${pri.color};">2026 \u2013 27</p><p style="color:${C.tS};">Action</p></div><div style="flex:1;border-radius:8px;padding:10px;text-align:center;background:${C.bgD};border:1px solid ${C.div};"><p style="font-weight:700;color:${C.tM};">2028 \u2013 29</p><p style="color:${C.tM};">Agency</p></div></div>`,'background:rgba(255,255,255,0.015);')}
${d}
${s(`<p style="font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:8px;color:${C.tM};">Key Dates \u2014 2026</p><div style="display:flex;gap:12px;font-size:10px;"><div style="flex:1;"><p style="font-weight:700;color:${C.tP};">Kickoff Workshop</p><p style="color:${C.tM};">Last 2 weeks of March</p></div><div style="flex:1;"><p style="font-weight:700;color:${C.tP};">Mid-Point Celebration</p><p style="color:${C.tM};">Last week of October</p></div></div>`,'padding-bottom:20px;')}
<div style="padding:12px 20px;display:flex;align-items:center;justify-content:space-between;background:rgba(0,0,0,0.3);border-top:1px solid rgba(255,255,255,0.04);"><p style="font-size:8px;text-transform:uppercase;letter-spacing:0.1em;font-weight:600;color:${C.tM};">Awareness \u2192 Action \u2192 Agency</p><p style="font-size:8px;color:${C.tM};">2024 \u2013 2029</p></div>`;

            app.innerHTML = `<div class="w-full max-w-md fade-up pb-12"><div id="result-card-render" style="background:linear-gradient(170deg,#13131f 0%,#181825 40%,#1a1a2e 100%);border-radius:20px;overflow:hidden;border:2px solid rgba(255,255,255,0.06);box-shadow:0 20px 60px rgba(0,0,0,0.5);font-family:'Plus Jakarta Sans',sans-serif;color:${C.tP};">${card}</div><div class="mt-8 space-y-3"><button id="downloadBtn" class="btn-primary w-full text-base">Download Card \u2B07</button><p class="text-xs text-center" style="color:var(--text-muted);">Save this card; bring it along to the kickoff workshop.</p></div></div>`;
            document.getElementById('downloadBtn').addEventListener('click', downloadCard);
        }

        // ============================================================
        //  DOWNLOAD
        // ============================================================
        function downloadCard() {
            const card = document.getElementById('result-card-render');
            const btn = document.getElementById('downloadBtn');
            btn.textContent = 'Generating\u2026'; btn.disabled = true;

            html2canvas(card, { backgroundColor:'#13131f', scale:2, useCORS:true, logging:false, allowTaint:true, width:card.offsetWidth, height:card.offsetHeight, scrollX:0, scrollY:-window.scrollY }).then(canvas => {
                const url = canvas.toDataURL('image/png');
                const safe = participantName.replace(/[^a-zA-Z0-9]/g,'-');
                if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                    const w = window.open('');
                    if (w) { w.document.write('<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Your Card</title><style>body{margin:0;padding:16px;background:#0f1019;display:flex;flex-direction:column;align-items:center;font-family:sans-serif;}img{max-width:100%;height:auto;border-radius:12px;}p{color:#9ca3af;font-size:14px;margin-top:16px;text-align:center;}</style></head><body><p>Long-press the image to save it.</p><img src="'+url+'" alt="Card"></body></html>'); w.document.close(); }
                    else { dl(url, safe); }
                } else { dl(url, safe); }
                btn.textContent = 'Download Card \u2B07'; btn.disabled = false;
                showToast('Card generated!');
            }).catch(e => { console.error(e); btn.textContent = 'Failed \u2014 Try Again'; btn.disabled = false; });
        }

        function dl(url, name) {
            const a = document.createElement('a');
            a.download = 'SZ-Action-Arc-'+name+'.png';
            a.href = url;
            document.body.appendChild(a); a.click(); document.body.removeChild(a);
        }

        // ============================================================
        renderWelcome();
    })();
    </script>
</body>
</html>
